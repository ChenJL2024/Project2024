# 总体说明

本训练系统基于`Efficient-GCN`网络公开源码改进。主要改动为：

1. 将原模型对三维空间骨骼点坐标的识别能力改为：对二维骨骼点坐标的识别。

2. 根据定义的骨骼点标号（见`../Index.png`），改进了图卷积网络。

3. 根据所开发的`作弊行为分析系统`特点，对原有数据处理方式进行了改进。

本系统采用的模型结构、原理，以及源码说明等内容可参阅原型文章（见：`./相关资料/Cons...`）

这里仅对改进后的使用方法作特别说明。

# 使用说明

#### 训练数据准备

1. 使用`../标注相关/3_ArrangeAndResults/readSRTandSample/`目录下，以`genSample_`开头的程序对原始标注数据作处理后，将得到中间数据。这些数据还不能直接用于模型训练，其一是因为数据格式还需要作进一步处理，以符合模型二训练的要求；其二是需要对数据集进行训练集、验证集的划分。

   将上述提到的中间数据移动至`./datasets/`目录下。
   
2. 根据需求修改`./src/reader/ntu_reader.py`文件的第81至84行，达到定义标签的目的。以当前源码内容示例如下：
   
   需要对回头进行训练，模型标签有2：是回头(0)与不是回头(1)。现将两种标签的的中间数据统一移动至`./datasets/`目录下，对`是回头`的对应数据文件名依次改为：`0.npy`、`8.npy`...
   
   第81至84行即可保留目前状态。
   
3. 按需求修改`./src/reader/ntu_reader.py`文件第113行中目前为0.8的参数。该参数的含义是：训练集占总数据量的比例，其余为验证集。训练过程中，系统将对验证集上表现更好的模型进行保存。

4. 运行如下命令以完成数据生成：`python main.py -c 2001 -gd`

   生成的数据将保存在如下目录：`./data/npy_dataset/original/ntu-xsub/`，该目录下的现有文件夹保存有之前训练用数据，具体说明见该目录下的`说明.md`
### 训练

1. 确认已将训练用数据放置在如下目录下：`./data/npy_dataset/original/ntu-xsub/`
2. 运行`python main.py -c 2001`
3. 训练中得到的模型将保存在`./forWorking/`中
4. 如需基于已有训练结果继续训练，需将模型文件放置在`./PretrainedModels/`中，并运行如下命令：`python main.py -c 2001 -r`

# 文件夹说明

除来自于模型原型的网络公开源码外，这里对其它文件夹的用途进行说明：

1. `./Arxiv/`：模型开发过程中，源码的历史版本。其中，`EfficientGCNv1-0-fromGitee`是直接由网络下载的最初始版本；`EfficientGCN-1st-2Dprj10pDone`是将模型改为基于二维坐标点后的里程碑版，该版实现了原模型基于三维坐标改进为目前基于二维坐标的目的。后来版本是在该版基础上进行的改进。
2. `postAna`：进行训练过程可视化时用到的文件，文件名以含义命名。后缀名为`.lay`的文件需要使用`Tecplot`软件打开。
3. `相关资料`：保存有模型原型的来源文章，以及建议用到的无监督学习技术。